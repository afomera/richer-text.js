{
  "version": 3,
  "sources": ["../../src/editor/extensions/CommandMenu.js"],
  "sourcesContent": ["import { Extension } from \"@tiptap/core\";\nimport Suggestion from \"@tiptap/suggestion\";\nimport tippy from \"tippy.js\";\n\nimport \"../elements/MenuList\";\n\nexport const commandItems = ({ calloutEnabled, tablesEnabled }) => {\n  const items = [];\n\n  items.push(\n    {\n      label: \"Heading 1\",\n      iconName: \"h1\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setHeading({ level: 1 }).run();\n      },\n    },\n    {\n      label: \"Heading 2\",\n      iconName: \"h2\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setHeading({ level: 2 }).run();\n      },\n    },\n    {\n      label: \"Heading 3\",\n      iconName: \"h3\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setHeading({ level: 3 }).run();\n      },\n    },\n    {\n      label: \"Large Text\",\n      iconName: \"text-size\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setFontSize(\"22px\").run();\n      },\n    },\n    {\n      label: \"Normal Text\",\n      iconName: \"text-size\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).unsetFontSize().run();\n      },\n    },\n    {\n      label: \"Bullet List\",\n      iconName: \"bullet-list\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).toggleBulletList().run();\n      },\n    },\n    {\n      label: \"Numbered List\",\n      iconName: \"ordered-list\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).toggleOrderedList().run();\n      },\n    },\n    {\n      label: \"Blockquote\",\n      iconName: \"blockquote\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).toggleBlockquote().run();\n      },\n    },\n    {\n      label: \"Line\",\n      iconName: \"horizontal-rule\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setHorizontalRule().run();\n      },\n    },\n    {\n      label: \"Code Block\",\n      iconName: \"code-block\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setCodeBlock().run();\n      },\n    }\n  );\n\n  if (calloutEnabled) {\n    items.push({\n      label: \"Callout\",\n      iconName: \"callout\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).setCallout().run();\n      },\n    });\n  }\n\n  if (tablesEnabled) {\n    items.push({\n      label: \"Table\",\n      iconName: \"table\",\n      command: ({ editor, range }) => {\n        editor.chain().focus().deleteRange(range).insertTable({ rows: 3, cols: 3 }).run();\n      },\n    });\n  }\n\n  return items;\n};\n\nconst CommandMenu = (calloutEnabled, tablesEnabled) => Extension.create({\n  name: \"command-menu\",\n\n  addOptions: {\n    suggestion: {\n      char: \"/\",\n      startOfLine: false,\n      items: ({ query }) => {\n        return commandItems({ calloutEnabled, tablesEnabled }).filter((item) =>\n          item.label.toLowerCase().startsWith(query.toLowerCase())\n        );\n      },\n\n    render: () => {\n      let component;\n      let popup;\n\n      return {\n        onStart: props => {\n          component = document.createElement('richer-text-menu-list');\n          component.items = props.items;\n          component.command = props.command;\n\n          if (!props.clientRect) {\n            return;\n          }\n          popup = tippy('body', {\n            getReferenceClientRect: props.clientRect,\n            appendTo: () => document.body,\n            content: component,\n            showOnCreate: true,\n            interactive: true,\n            trigger: 'manual',\n            placement: 'bottom-start',\n          });\n        },\n\n        onUpdate(props) {\n          component.items = props.items;\n          component.command = props.command;\n          if (!props.clientRect) {\n            return\n          }\n\n          popup[0].setProps({\n            getReferenceClientRect: props.clientRect,\n          })\n        },\n\n        onKeyDown(props) {\n          if (props.event.key === 'Escape') {\n            popup[0].hide()\n            return true\n          }\n          return component.onKeyDown(props)\n        },\n\n        onExit() {\n          popup[0].destroy();\n        },\n      }\n    },\n      command: ({ editor, range, props }) => {\n        props.command({ editor, range, props });\n      },\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      Suggestion({\n        editor: this.editor,\n        ...this.options.suggestion,\n      }),\n    ];\n  },\n});\n\nexport default CommandMenu;\n"],
  "mappings": "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",
  "names": []
}

{
  "version": 3,
  "sources": ["../../src/editor/extensions/RicherTextEmbed.js"],
  "sourcesContent": ["import { Node, mergeAttributes } from \"@tiptap/core\";\nimport { html, render } from \"lit\";\nimport \"../elements/RicherTextEmbed\";\n\nexport default Node.create({\n  name: 'richerTextEmbed',\n  group: 'block',\n  draggable: true,\n\n  addAttributes() {\n    return {\n      sgid: {\n        default: null,\n      },\n    };\n  },\n\n  addOptions() {\n    return {\n      embedPath: \"/embeds\",\n    };\n  },\n\n  addStorage() {\n    return {\n      embedPath: this.options.embedPath,\n    }\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"richer-text-embed\", mergeAttributes(this.options, HTMLAttributes)];\n  },\n\n  parseHTML() {\n    return [{ tag: \"richer-text-embed\" }];\n  },\n\n  addNodeView() {\n    return ({ node, getPos, editor }) => {\n      const template = html`<div></div>`;\n\n      // Scratch element to render into.\n      const scratch = document.createElement(\"div\");\n      render(template, scratch);\n\n      const dom = scratch.firstElementChild;\n\n      function removeNode() {\n        if (typeof getPos === \"function\") {\n          const { view } = editor;\n\n          const { tr } = view.state;\n\n          const pos = getPos();\n          tr.delete(pos, pos + 1);\n          view.dispatch(tr);\n        }\n      }\n\n      const contentDiv = document.createElement(\"richer-text-embed\");\n      contentDiv.sgid = node.attrs.sgid;\n      contentDiv.removeNode = removeNode;\n      contentDiv.setAttribute(\"embed-path\", this.options.embedPath);\n\n      dom.appendChild(contentDiv);\n\n      return {\n        dom\n      };\n    };\n  },\n});\n"],
  "mappings": ";AAAA,SAAS,MAAM,uBAAuB;AACtC,SAAS,MAAM,cAAc;AAG7B,IAAO,0BAAQ,KAAK,OAAO;AAAA,EACzB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,WAAW;AAAA,EAEX,gBAAgB;AACd,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,WAAO;AAAA,MACL,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,aAAa;AACX,WAAO;AAAA,MACL,WAAW,KAAK,QAAQ;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,WAAW,EAAE,eAAe,GAAG;AAC7B,WAAO,CAAC,qBAAqB,gBAAgB,KAAK,SAAS,cAAc,CAAC;AAAA,EAC5E;AAAA,EAEA,YAAY;AACV,WAAO,CAAC,EAAE,KAAK,oBAAoB,CAAC;AAAA,EACtC;AAAA,EAEA,cAAc;AACZ,WAAO,CAAC,EAAE,MAAM,QAAQ,OAAO,MAAM;AACnC,YAAM,WAAW;AAGjB,YAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,aAAO,UAAU,OAAO;AAExB,YAAM,MAAM,QAAQ;AAEpB,eAAS,aAAa;AACpB,YAAI,OAAO,WAAW,YAAY;AAChC,gBAAM,EAAE,KAAK,IAAI;AAEjB,gBAAM,EAAE,GAAG,IAAI,KAAK;AAEpB,gBAAM,MAAM,OAAO;AACnB,aAAG,OAAO,KAAK,MAAM,CAAC;AACtB,eAAK,SAAS,EAAE;AAAA,QAClB;AAAA,MACF;AAEA,YAAM,aAAa,SAAS,cAAc,mBAAmB;AAC7D,iBAAW,OAAO,KAAK,MAAM;AAC7B,iBAAW,aAAa;AACxB,iBAAW,aAAa,cAAc,KAAK,QAAQ,SAAS;AAE5D,UAAI,YAAY,UAAU;AAE1B,aAAO;AAAA,QACL;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAC;",
  "names": []
}

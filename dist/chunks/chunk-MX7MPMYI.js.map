{
  "version": 3,
  "sources": ["../../src/editor/extensions/Callout.js"],
  "sourcesContent": ["import { mergeAttributes, Node, wrappingInputRule } from \"@tiptap/core\";\nimport { html, render } from \"lit\";\n\nexport default Node.create({\n  name: \"callout\",\n  group: \"block\",\n  content: \"paragraph+\",\n  defining: true,\n  draggable: true,\n\n  addAttributes() {\n    return {\n      'data-color': {\n        default: \"gray\",\n      },\n    };\n  },\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: \"callout\"\n      },\n    };\n  },\n\n  parseHTML() {\n    return [{ tag: \"div[class=callout]\" }];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\"div\", mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n\n  addNodeView() {\n    return ({ node, getPos, editor }) => {\n      const template = html`<div></div>`;\n\n      // Scratch element to render into.\n      const scratch = document.createElement(\"div\");\n      render(template, scratch);\n\n      const dom = scratch.firstElementChild;\n\n      // Add select dropdown to change color\n      const select = document.createElement(\"select\");\n      select.classList.add(\"callout-select\");\n      select.addEventListener(\"change\", (event) => {\n        editor.commands.setNodeSelection(getPos());\n        editor.commands.updateAttributes(\"callout\", { \"data-color\": event.target.value });\n        editor.commands.focus(getPos() + 1);\n      });\n\n      const colors = [\"gray\", \"blue\", \"green\", \"red\", \"yellow\"];\n\n      colors.forEach((color) => {\n        const option = document.createElement('option')\n        option.value = color\n        option.textContent = color.charAt(0).toUpperCase() + color.slice(1)\n        option.selected = color === node.attrs[\"data-color\"]\n        select.append(option)\n      });\n\n      dom.appendChild(select);\n\n      const contentDiv = document.createElement(\"div\");\n      contentDiv.classList.add(\"callout\");\n      contentDiv.dataset.color = node.attrs[\"data-color\"];\n\n      dom.appendChild(contentDiv);\n\n      return {\n        dom,\n        contentDOM: contentDiv,\n      };\n    };\n  },\n\n  addCommands() {\n    return {\n      setCallout:\n        () =>\n        ({ commands, editor }) => {\n          const { type = null } = editor.getAttributes(this.name);\n          if (type) {\n            commands.lift(this.name);\n          } else {\n            return commands.toggleWrap(this.name);\n        }\n      },\n    };\n  },\n  addInputRules() {\n    return [\n      wrappingInputRule({\n        find: /^\\$callout\\$$/,\n        type: this.type,\n        getAttributes: (match) => {\n          return { type: match[1] };\n        },\n      }),\n    ];\n  },\n});\n"],
  "mappings": ";AAAA,SAAS,iBAAiB,MAAM,yBAAyB;AACzD,SAAS,MAAM,cAAc;AAE7B,IAAO,kBAAQ,KAAK,OAAO;AAAA,EACzB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,SAAS;AAAA,EACT,UAAU;AAAA,EACV,WAAW;AAAA,EAEX,gBAAgB;AACd,WAAO;AAAA,MACL,cAAc;AAAA,QACZ,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,WAAO;AAAA,MACL,gBAAgB;AAAA,QACd,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY;AACV,WAAO,CAAC,EAAE,KAAK,qBAAqB,CAAC;AAAA,EACvC;AAAA,EAEA,WAAW,EAAE,eAAe,GAAG;AAC7B,WAAO,CAAC,OAAO,gBAAgB,KAAK,QAAQ,gBAAgB,cAAc,GAAG,CAAC;AAAA,EAChF;AAAA,EAEA,cAAc;AACZ,WAAO,CAAC,EAAE,MAAM,QAAQ,OAAO,MAAM;AACnC,YAAM,WAAW;AAGjB,YAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,aAAO,UAAU,OAAO;AAExB,YAAM,MAAM,QAAQ;AAGpB,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,UAAU,IAAI,gBAAgB;AACrC,aAAO,iBAAiB,UAAU,CAAC,UAAU;AAC3C,eAAO,SAAS,iBAAiB,OAAO,CAAC;AACzC,eAAO,SAAS,iBAAiB,WAAW,EAAE,cAAc,MAAM,OAAO,MAAM,CAAC;AAChF,eAAO,SAAS,MAAM,OAAO,IAAI,CAAC;AAAA,MACpC,CAAC;AAED,YAAM,SAAS,CAAC,QAAQ,QAAQ,SAAS,OAAO,QAAQ;AAExD,aAAO,QAAQ,CAAC,UAAU;AACxB,cAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,QAAQ;AACf,eAAO,cAAc,MAAM,OAAO,CAAC,EAAE,YAAY,IAAI,MAAM,MAAM,CAAC;AAClE,eAAO,WAAW,UAAU,KAAK,MAAM,YAAY;AACnD,eAAO,OAAO,MAAM;AAAA,MACtB,CAAC;AAED,UAAI,YAAY,MAAM;AAEtB,YAAM,aAAa,SAAS,cAAc,KAAK;AAC/C,iBAAW,UAAU,IAAI,SAAS;AAClC,iBAAW,QAAQ,QAAQ,KAAK,MAAM,YAAY;AAElD,UAAI,YAAY,UAAU;AAE1B,aAAO;AAAA,QACL;AAAA,QACA,YAAY;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,cAAc;AACZ,WAAO;AAAA,MACL,YACE,MACA,CAAC,EAAE,UAAU,OAAO,MAAM;AACxB,cAAM,EAAE,OAAO,KAAK,IAAI,OAAO,cAAc,KAAK,IAAI;AACtD,YAAI,MAAM;AACR,mBAAS,KAAK,KAAK,IAAI;AAAA,QACzB,OAAO;AACL,iBAAO,SAAS,WAAW,KAAK,IAAI;AAAA,QACxC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,gBAAgB;AACd,WAAO;AAAA,MACL,kBAAkB;AAAA,QAChB,MAAM;AAAA,QACN,MAAM,KAAK;AAAA,QACX,eAAe,CAAC,UAAU;AACxB,iBAAO,EAAE,MAAM,MAAM,CAAC,EAAE;AAAA,QAC1B;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACF,CAAC;",
  "names": []
}
